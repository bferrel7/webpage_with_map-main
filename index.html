<!DOCTYPE html>
<html lang="en">
<head>

  <!-- Basic Page Needs–– -->
  <meta charset="utf-8">
  <title>Mod Project</title>
  <meta name="description" content="">
  <meta name="author" content="">

  <!-- Mobile Specific Metas -->
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- FONT -->
  <link href="https://fonts.googleapis.com/css?family=Raleway:400,300,600" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.2/css/all.min.css">

  <!-- CSS -->
  <link rel="stylesheet" href="css/normalize.css">
  <link rel="stylesheet" href="css/skeleton.css">
  <link rel="stylesheet" href="css/customize.css">
  <script src='https://api.mapbox.com/mapbox.js/v3.3.1/mapbox.js'></script>
  <link href='https://api.mapbox.com/mapbox.js/v3.3.1/mapbox.css' rel='stylesheet' />
  <style>
  #map_1,#map_2,#map_3 {
    height: 500px;
  }
  </style>

  <!-- D3 -->
  <script src="https://d3js.org/d3.v4.min.js"></script>

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="images/favicon.png">

</head>
<body>

  <div class="container one-bottom" style="margin-top: 50px">
    <div class="ten columns">
      <h2>Mobility on Demand Systems: Data-Driven Analysis, Simulation, Visualization</h2>
      <p>
        ARCH 6306/6050, DSBA 6010, ITIS 8010/6010: Wednesdays 6pm-8:30pm, Taught Online
        <br>
        Dr. Dimitris Papanikolaou | dpapanik@uncc.edu | Urban Synergetics Lab | https://urbansynergeticslab.net
      </p>
    </div>
    <div class="two columns">
      <a href="https://urbansynergeticslab.net/"><img class="scale-with-grid" src="img/LabLogo_dark_cropped.png"></a>
    </div>
    <div class="twelve columns">
      <h3>B-Cycle Stations in Charlotte, NC</h3>
      <h5>B-Cycle is a docked bike sharing MoD system implemented in various locations, including Charlotte, NC. </h5>
    </div>
  </div>

  <div class="container one-bottom" >
    <div class="twelve columns">
      <h3>Location<h3>
      <h5>
        The location of this data is Charlotte, NC.
      </h5>
    </div>
  </div>

  <div id="map_1" class="one-bottom"></div>


  <div class="container one-bottom" >
    <div class="twelve columns">
      <h3>Station Location</h3>
      <h5>
        B-Cycle locations of stations in Charlotte, NC.
      </h5>
    </div>
  </div>

  <div id="map_2" class="one-bottom"></div>


  <div class="container one-bottom" >
    <div class="twelve columns">
      <h3>Station Accumulation Levels</h3>
      <h5>
        Accumulation levels of all B-Cycle stations located in Charlotte, NC.
      </h5>
    </div>
  </div>


  <div id="map_3" class="one-bottom"></div>


  <div class="container one-bottom" >
    <h3>Below is an array of images organized into rows and columns</h3>
  </div>

  <div class="container one-bottom" >
    <div class="row">
      <img class="four columns scale-with-grid quarter-bottom-rel" src="img/img_640/640x480.jpg">
      <img class="four columns scale-with-grid quarter-bottom-rel" src="img/img_640/640x480.jpg">
      <img class="four columns scale-with-grid quarter-bottom-rel" src="img/img_640/640x480.jpg">
    </div>
    <div class="row">
      <img class="four columns scale-with-grid quarter-bottom-rel" src="img/img_640/640x480.jpg">
      <img class="four columns scale-with-grid quarter-bottom-rel" src="img/img_640/640x480.jpg">
      <img class="four columns scale-with-grid quarter-bottom-rel" src="img/img_640/640x480.jpg">
    </div>
  </div>

  <div class="container one-bottom" >
    <h2>This is Heading 2</h2>
    <h3>This is Heading 3</h3>
    <h4>This is Heading 4</h4>
    <h5>This is Heading 5</h5>
    <p>This is paragraph text p</p>
  </div>

  <div class="container one-bottom" >
    <h2>Team & Contributions</h2>
    <h5>Be very clear about how each student in your team contributed to this project</h5>
    <h3>Student A</h3>
    <h5>Student A contributed to this, this, and that.</h5>
    <h3>Student B</h3>
    <h5>Student B contributed to this, this, and that.</h5>
    <h3>Student C</h3>
    <h5>Student C contributed to this, this, and that.</h5>
  </div>



  <script>

  L.mapbox.accessToken = 'pk.eyJ1IjoiZGltcCIsImEiOiJkRnlra3RjIn0.E9CTYzNUEx0yb3dcfV4SiA';

  var map_1 = L.mapbox.map('map_1')
  .setView([35.22732,-80.83827], 10)
  .addLayer(L.mapbox.styleLayer('mapbox://styles/mapbox/light-v10'));
  map_1
  .scrollWheelZoom.disable();


  d3.json("mergedFiles.json", function(json) {
    console.log(json);

    var map_2 = L.mapbox.map('map_2')
    .setView([35.22732,-80.83827], 12)
    .addLayer(L.mapbox.styleLayer('mapbox://styles/mapbox/light-v10'));
    map_2
    .scrollWheelZoom.disable();

    json.data.stations.forEach(function(station){
      station.lat = +station.lat;
      station.lng = +station.lon;
      var path_options = {
        radius :  6,
        color : d3.rgb(16,52,166).brighter(),
        stroke: true,
        weight : 1,
        fill : true,
        Color: d3.rgb(16,52,166).brighter(),
      };
      L.circleMarker([station.lat, station.lon], path_options).addTo(map_2);
    });

    var map_3 = L.mapbox.map('map_3')
    .setView([35.22732,-80.83827], 12)
    .addLayer(L.mapbox.styleLayer('mapbox://styles/mapbox/light-v10'));
    map_3
    .scrollWheelZoom.disable();

    json.data.stations.forEach(function(station){
      station.lat = +station.lat;
      station.lng = +station.lon;
      var inventory_level = station.num_bikes_available / (station.num_bikes_available+station.num_docks_available);
      var path_options = {
        radius :  0.5 * (station.num_bikes_available + station.num_docks_available),
        color : d3.rgb(16,52,166).brighter(),
        fillColor : (function(){
          return inventory_level > 0.5? d3.rgb(16,52,166) : d3.rgb(16,52,166).darker(2)
        })(),
        stroke: true,
        weight : 1,
        opacity : 1,
        fillOpacity : 0.8
      };
      L.circleMarker([station.lat, station.lon], path_options).addTo(map_3);
    });
  });




  </script>


</body>
</html>
